import{_ as I,o as d,c,a as t,F as r,f as _,t as a,g as f,h as g,v as C,d as v,i as b}from"./index-d710a93e.js";const{VITE_URL:u,VITE_PATH:h}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"caiji_hexschool",BASE_URL:"/vueweek8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},x={data(){return{carts:[],loadingId:"",updataloadingId:""}},methods:{getCartList(){this.$http.get(`${u}api/${h}/cart`).then(s=>{console.log(s),this.carts=s.data.data}).catch(s=>{console.log(s)})},delCartItem(s){this.loadingId=s,this.$http.delete(`${u}api/${h}/cart/${s}`).then(l=>{console.log(l),this.loadingId="",this.getCartList()}).catch(l=>{console.log(l)})},updateCartItem(s){this.updataloadingId=s.product.id;const l={product_id:s.product.id,qty:s.qty};this.$http.put(`${u}api/${h}/cart/${s.id}`,{data:l}).then(i=>{console.log(i),this.updataloadingId="",this.getCartList()}).catch(i=>{console.log(i)})}},mounted(){this.getCartList()}},y=t("h2",null,"購物車",-1),V={key:0,class:"table align-middle"},$=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價"),t("th",null,"小計")])],-1),k=["onClick"],E={class:"fas fa-spinner fa-pulse"},L={class:"input-group input-group-sm"},m={class:"input-group mb-3"},T=["onChange","onUpdate:modelValue","disabled"],S=["value"],w={class:"input-group-text",id:"basic-addon2"},D=t("td",{colspan:"4",class:"text-end"},"總計：",-1),R={class:"text-start"},U=t("tr",null,null,-1);function q(s,l,i,B,n,p){return d(),c(r,null,[y,n.carts.carts?(d(),c("table",V,[$,t("tbody",null,[(d(!0),c(r,null,_(n.carts.carts,e=>(d(),c("tr",{key:e.product.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:o=>p.delCartItem(e.id)},[g(t("i",E,null,512),[[C,e.id===n.loadingId]]),v(" x ")],8,k)]),t("td",null,a(e.product.title)+" ",1),t("td",null,[t("div",L,[t("div",m,[g(t("select",{class:"form-select",onChange:o=>p.updateCartItem(e),"onUpdate:modelValue":o=>e.qty=o,disabled:n.updataloadingId===e.product.id},[(d(),c(r,null,_(10,o=>t("option",{key:o+1,value:o},a(o),9,S)),64))],40,T),[[b,e.qty]]),t("span",w,a(e.product.unit),1)])])]),t("td",null,a(e.product.price),1),t("td",null,a(e.total),1)]))),128))]),t("tfoot",null,[t("tr",null,[D,t("td",R,a(n.carts.total),1)]),U])])):f("",!0)],64)}const N=I(x,[["render",q]]);export{N as default};
